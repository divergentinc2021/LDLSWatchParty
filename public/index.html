<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Watch Party</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../src/css/styles.css">
</head>
<body>
  <div id="app">
    
    <!-- Landing View -->
    <section id="view-landing" class="view active">
      <div class="landing-container">
        <header class="landing-header">
          <div class="logo">
            <span class="logo-icon">‚ñ∂</span>
            <h1>Watch Party</h1>
          </div>
          <p class="tagline">Watch together, apart.</p>
        </header>

        <div class="landing-actions">
          <div class="action-card create">
            <h2>Host a Party</h2>
            <p>Create a room and invite friends</p>
            <button id="btn-create" class="btn btn-primary">Create Room</button>
          </div>

          <div class="divider"><span>or</span></div>

          <div class="action-card join">
            <h2>Join a Party</h2>
            <p>Enter your invite code</p>
            <div class="code-input-group">
              <input 
                type="text" 
                id="input-code" 
                class="code-input" 
                maxlength="5" 
                placeholder="XXXXX"
                autocomplete="off"
                spellcheck="false"
              >
              <button id="btn-join" class="btn btn-secondary">Join</button>
            </div>
          </div>
        </div>

        <footer class="landing-footer">
          <p>Free ‚Ä¢ No downloads ‚Ä¢ Up to 5 people</p>
        </footer>
      </div>
    </section>

    <!-- Auth View -->
    <section id="view-auth" class="view">
      <div class="auth-container">
        <button id="btn-back-landing" class="btn-back">‚Üê Back</button>
        
        <div class="auth-card">
          <h2 id="auth-title">Enter your email</h2>
          <p id="auth-subtitle">We'll send you a magic link to join</p>
          
          <div id="auth-form" class="auth-form">
            <input 
              type="email" 
              id="input-email" 
              class="email-input" 
              placeholder="you@example.com"
              autocomplete="email"
            >
            <button id="btn-send-link" class="btn btn-primary">Send Magic Link</button>
          </div>

          <div id="auth-pending" class="auth-pending hidden">
            <div class="pending-icon">‚úâ</div>
            <h3>Check your inbox</h3>
            <p>Click the link we sent to <strong id="pending-email"></strong></p>
            
            <div id="pending-room-info" class="pending-room-info hidden">
              <p>You're joining room:</p>
              <code id="pending-room-code" class="pending-code">XXXXX</code>
              <p class="pending-note">Save this code in case you need it!</p>
            </div>
            
            <button id="btn-resend" class="btn btn-text">Resend link</button>
          </div>

          <div id="auth-error" class="auth-error hidden">
            <p id="error-message"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Room View -->
    <section id="view-room" class="view">
      <div class="room-container">
        
        <!-- Room Header -->
        <header class="room-header">
          <div class="room-info">
            <span class="room-code" id="display-room-code">XXXXX</span>
            <button id="btn-copy-code" class="btn-icon" title="Copy code">üìã</button>
            <button id="btn-invite" class="btn-icon" title="Invite friend">‚ûï</button>
          </div>
          <div class="room-controls">
            <span id="participant-count" class="participant-count">1 watching</span>
            <button id="btn-leave" class="btn btn-danger btn-sm">Leave</button>
          </div>
        </header>

        <!-- Main Content Area -->
        <main class="room-main">
          
          <!-- Video Grid -->
          <div class="video-section">
            <!-- Screen share display (large) -->
            <div id="screen-container" class="screen-container">
              <video id="screen-video" autoplay playsinline></video>
              <div id="screen-placeholder" class="screen-placeholder">
                <p>Waiting for host to share screen...</p>
              </div>
            </div>

            <!-- Webcam grid (small tiles) -->
            <div id="webcam-grid" class="webcam-grid">
              <!-- Local video -->
              <div class="webcam-tile local" id="local-tile">
                <video id="local-video" autoplay playsinline muted></video>
                <span class="webcam-name">You</span>
              </div>
              <!-- Remote videos added dynamically -->
            </div>
          </div>

          <!-- Chat Section -->
          <aside class="chat-section">
            <div class="chat-header">
              <h3>Chat</h3>
            </div>
            <div id="chat-messages" class="chat-messages">
              <!-- Messages rendered here -->
            </div>
            <form id="chat-form" class="chat-form">
              <input 
                type="text" 
                id="chat-input" 
                placeholder="Type a message..."
                autocomplete="off"
              >
              <button type="submit" class="btn btn-primary btn-sm">Send</button>
            </form>
          </aside>
        </main>

        <!-- Media Controls -->
        <footer class="room-footer">
          <div class="media-controls">
            <button id="btn-toggle-mic" class="control-btn" data-active="false">
              <span class="icon-on">üé§</span>
              <span class="icon-off">üîá</span>
              <span class="label">Mic</span>
            </button>
            <button id="btn-toggle-cam" class="control-btn" data-active="false">
              <span class="icon-on">üì∑</span>
              <span class="icon-off">üì∑</span>
              <span class="label">Camera</span>
            </button>
            <button id="btn-toggle-screen" class="control-btn host-only" data-active="false">
              <span class="icon-on">üñ•</span>
              <span class="icon-off">üñ•</span>
              <span class="label">Share Screen</span>
            </button>
          </div>
        </footer>
      </div>

      <!-- Invite Modal -->
      <div id="invite-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
          <button class="modal-close" id="btn-close-invite">√ó</button>
          <h2>Invite a Friend</h2>
          <p>Enter their email to send an invite</p>
          <div class="invite-form">
            <input 
              type="email" 
              id="invite-email" 
              placeholder="friend@example.com"
              autocomplete="email"
            >
            <button id="btn-send-invite" class="btn btn-primary">Send Invite</button>
          </div>
          <div class="invite-divider"><span>or share the code</span></div>
          <div class="invite-code-display">
            <code id="invite-code-text">XXXXX</code>
            <button id="btn-copy-invite" class="btn btn-secondary btn-sm">Copy</button>
          </div>
        </div>
      </div>
    </section>

  </div>

  <script type="module" src="../src/js/app.js"></script>
</body>
</html>
